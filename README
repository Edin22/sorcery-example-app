An example app displaying the usage of the sorcery gem:
https://github.com/NoamB/sorcery

Files of interest:

app/controllers/*

app/mailers/user_mailer.rb

app/models/user.rb

app/views/*

config/application.rb

db/migrate/*
